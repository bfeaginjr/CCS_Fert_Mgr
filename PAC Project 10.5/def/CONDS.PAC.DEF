D0241926
/*    INSTRUCTION FIELD FORMAT

  Each instruction has the following format:
    
      INSTRUCTION INFO: name, id, group, display filter, int32, float, num args, help, op pos, int64, I/O unit filter, OptoScript name
      ARGUMENT 1:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt,
      ARGUMENT 2:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt,
      ...
      ARGUMENT 8:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt;    */
/*
  INSTRUCTION INFO DETAILS

    instruction name,   (string)
    instruction number, (highest used so far: 121)
    group for sorting,  
      Chart                    = 100
      Control Engine           = 103
      Digital Point            = 104
      I/O Unit                 = 106 
      Logical                  = 107
      Miscellaneous            = 108
      Simulation               = 109
      String                   = 110
      Pointers                 = 111
      Communication            = 112
      Timing                   = 113
      Error Handling           = 114
;*/
/*  display filter,      (Bitmask)
    forth word int32,    (string)
    forth word float,    (string)
    number of arguments, (char) 0 - 8
    help id,             generated by RoboHelp for online help (internal use only) 
                         should be left as zero for anyone else,
    operator position,   (a number less than or equal to the number of arguments)
    forth word int64,    (string)  (this field is optional)
    I/O Unit filter,     (Bitmask) (this field is optional)
    OptoScript name,     (string)  (this field is optional)
;*/
/*
  BITMASK 0 - Digital defines:

      DIN_SMART                        0x40000000
      DIN_COUNTER                      0x00000001
      DIN_COUNTER_QUADRATURE           0x00000002
      DOUT_SMART                       0x10000000
      DOUT_TPO                         0x00010000 
;*/
/*
  BITMASK 1 - Analog/Misc. defines:

      AIN                              0x00000001
      PID_LOOP_2                       0x00000004
      AOUT                             0x00000002
      DIGITAL_EVENT_REACTION           0x00000008
      ANALOG_EVENT_REACTION            0x00000010
      EVENT_REACTION_GROUP             0x00000080
      CHART                            0x00000100
      PID_LOOP                         0x00000200
;*/
/*
  BITMASK 2 - I/O Unit defines:

      see bitmask.h for details
;*/
/*
  BITMASK 3 - Constant & Variable defines:

      LITERAL_INTEGER                  0x00000001
      LITERAL_FLOAT                    0x00000002
      LITERAL_STRING                   0x00000004
      VARIABLE_INTEGER                 0x00000008
      VARIABLE_FLOAT                   0x00000010
      VARIABLE_TIMER                   0x00000020
      VARIABLE_STRING                  0x00000040
      VARIABLE_POINTER                 0x80000000
      TABLE_INTEGER                    0x00000100
      TABLE_FLOAT                      0x00000200
      TABLE_STRING                     0x00000800
      TABLE_POINTER                    0x00001000
      VARIABLE_UP_TIMER                0x00002000 
      VARIABLE_INTEGER_64              0x00004000
      LITERAL_INTEGER_64               0x00008000
      TABLE_INTEGER_64                 0x00010000
      VARIABLE_STREAM                  0x00040000
;*/
/*
  FETCH TYPES:

    0  = No fetch
    1  = Fetch and promote         
    2  = Fetch as is
    3  = Fetch and demote to int32
    4  = Store after promoting
    5  = Store int32 or int64 to destination
    6  = Store float to destination
    7  = Fetch and always promote
    8  = Fetch and promote or demote to largest integer 
    9  = Fetch as is, promote to int64 if needed (digital points and numbers only)
    10 = Store Int32 to destination
    11 = Store Int64 to destination
    12 = Fetch and promote to Int64

    Promote: to increase the storage capacity of a number, if necessary. 
             An int32 can be promoted to an int64 or a float.
             An int64 can be promoted to a float.
    Demote:  to decrease the storage capacity of a number, if necessary. 
             An float can be demoted to an int64 or an int32.
             An int64 can be demoted to an int32.
*/;


AND?,14,107, 0, LAND, ,2,10,2, DLAND D>I, ,
50000000, 00000000, 0000000000000000, 0000C01B, 9,  Is,
50000000, 00000000, 0000000000000000, 0000C01B, 9,  ;

Bit AND?,16,107, 0, AND, ,2,4002,2, DAND 0.. D<>, ,
00000000, 00000000, 0000000000D40000, 0000C009, 8,  Is,
00000000, 00000000, 0000000000D40000, 0000C009, 8,  ;

Bit NOT?,17,107, 0, NOT, ,1,4005,1, DNOT 0.. D<>, ,
00000000, 00000000, 0000000000D40000, 0000C009, 8,  Is;

Bit Off?,63,107, 0, BitTestNot, ,2,4006,2, I>D 1.. 2SWAP D>I 2SHIFT DAND D0=, ,IsBitOff,
00000000, 00000000, 0000000000D40000, 00004008, 2,  In,
00000000, 00000000, 0000000000000000, 00000009, 3,  Bit;

Bit Off in Numeric Table Element?,117,107, 0, BitTestNot, ,3,9014,3, I>D 1.. 2SWAP D>I 2SHIFT DAND D0=, ,IsBitOffInNumTableElement,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010100, 2,  Of Table,
00000000, 00000000, 0000000000000000, 00000009, 3,  Bit;

Bit On?,62,107, 0, BitTest, ,2,4007,2, I>D 1.. 2SWAP D>I 2SHIFT DAND 0.. D<>, ,IsBitOn,
00000000, 00000000, 0000000000D40000, 00004008, 2,  In,
00000000, 00000000, 0000000000000000, 00000009, 3,  Bit;

Bit On in Numeric Table Element?,116,107, 0, BitTest, ,3,9015,3, I>D 1.. 2SWAP D>I 2SHIFT DAND 0.. D<>, ,IsBitOnInNumTableElement,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010100, 2,  Of Table,
00000000, 00000000, 0000000000000000, 00000009, 3,  Bit;

Bit OR?,18,107, 0, OR, ,2,4009,2, DOR 0.. D<>, ,
00000000, 00000000, 0000000000D40000, 0000C009, 8,  Is,
00000000, 00000000, 0000000000D40000, 0000C009, 8,    ;

Bit XOR?,19,107, 0, XOR, ,2,4015,2, DXOR 0.. D<>, ,
00000000, 00000000, 0000000000D40000, 0000C009, 8,  Is,
00000000, 00000000, 0000000000D40000, 0000C009, 8,    ;

Calling Chart Running?,76,100, 0, Caller@ ?RUNNING, ,0,5505,0, , ,IsCallingChartRunning,;

Calling Chart Stopped?,77,100, 0, Caller@ ?STOPPED, ,0,5506,0, , ,IsCallingChartStopped,;

Calling Chart Suspended?,78,100, 0, Caller@ ?SUSPED, ,0,5507,0, , ,IsCallingChartSuspended,;

Caused a Chart Error?,29,114,0,ERRORTASK@ =, ,1,5508,1, , ,HasChartCausedError,
00000000, 00000100, 0000000000000000, 00000000, 0,  Has;

Caused an I/O Unit Error?,30,114,0,ERRORBOARD@ =, ,1,5509,1, , ,HasIoUnitCausedError,
00000000, 00000000, 00000007FFFF733F, 00000000, 0,  I/O Unit;

Chart Running?,22,100, 0, ?RUNNING, ,1,5510,1, , ,IsChartRunning,
00000000, 00000100, 0000000000000000, 00000000, 0,  Is;

Chart Stopped?,25,100, 0, ?STOPPED, ,1,5511,1, , ,IsChartStopped,
00000000, 00000100, 0000000000000000, 00000000, 0,  Is;

Chart Suspended?,23,100, 0, ?SUSPED, ,1,5512,1, , ,IsChartSuspended,
00000000, 00000100, 0000000000000000, 00000000, 0,  Is;

Comment (Block),27,108, 0, \\, ,0,5526,0, , ;

Comment (Single Line),26,108, 0, \, ,1,5527,0, , ,
00000000, 00000000, 0000000000000000, 00000004, 0,  ;

Comment (OptoControl Conversion Issue),115,108, 10000000, , ,0,9003,0, , ;

Communication Open?,109,112, 0, ?OPEN 0>, , 1,5528,1, , ,IsCommunicationOpen,
00000000, 00000000, 0000000000000000, 00040000, 0,  Communication Handle;

Communication To All I/O Points Enabled?,111,109, 0, PTS.ENABLED?, ,0,5550,0, , ,IsCommToAllIoPointsEnabled,;

Communication To All I/O Units Enabled?,112,109, 0, IO.ENABLED?, ,0,5551,0, , ,IsCommToAllIoUnitsEnabled,;

Down Timer Expired?,108,113, 0, T0=, T0=,1,6510,1, , ,HasDownTimerExpired,
00000000, 00000000, 0000000000000000, 00000020, 0,  Down Timer;

Equal to Numeric Table Element?,65,107, 0, =, F=,3,7007,3, D=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Equal?,5,107, 0, =, F=,2,7006,2, D=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  To   ;

Error on I/O Unit?,33,114, 0, ERRORBOARD@ ?(null) 0=, ,0,7009,0, , ,IsErrorOnIoUnit,;

Error?,28,114, 0, ERRORCOUNT@ 0<>, ,0,7008,0, , ,IsErrorPresent,;

Float Valid?,113,108, 0, $7F800000 AND $7F800000 <>, ,1,8004,1, , ,IsFloatValid,
00000000, 00000000, 0000000000000000, 00000012, 2,  Is;

Greater Than or Equal to Numeric Table Element?,75,107, 0, >=, F>=,3,8559,3, D>=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Greater Than or Equal?,7,107, 0, >=, F>=,2,8558,2, D>=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  To;

Greater Than Numeric Table Element?,73,107, 0, >, F>,3,8557,3, D>, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Greater?,9,107, 0, >, F>,2,8556,2, D>, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Than;

I/O Point Communication Enabled?,94,109,  0,  ENABLE@, , 1,502,1, , ,IsIoPointCommEnabled,
50000000, 00000003, 0000000000000000, 00000000, 0,  I/O Point;

I/O Unit Communication Enabled?,95,109,  0,  ENABLE@, , 1,503,1, , ,IsIoUnitCommEnabled,
00000000, 00000000, 00000007FFFF733F, 00000000, 0,  I/O Unit;

I/O Unit Ready?,96,106, 0, BoardReady? 0=, , 1,504,1, , ,IsIoUnitReady,
00000000, 00000000, 00000007FFFF733F, 00000000, 0,  I/O Unit;

Less Than or Equal to Numeric Table Element?,71,107, 0, <=, F<=,3,1004,3, D<=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Less Than or Equal?,8,107, 0, <=, F<=,2,1003,2, D<=, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  To;

Less Than Numeric Table Element?,69,107, 0, <, F<,3,1002,3, D<, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Less?,10,107, 0, <, F<,2,1001,2, D<, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Than;

Not Equal to Numeric Table Element?,67,107, 0, <>, F<>,3,2005,3, D<>, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00010300, 1,  Of Table;

Not Equal?,6,107, 0, <>, F<>,2,2004,2, D<>, ,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  To;

NOT?,15,107, 0, LNOT, ,1,2003,1, D0=, ,
50000000, 00000000, 0000000000000000, 0000C01B, 2,  Is;

Off-Latch Set?,97,104, 0, -LATCH@I, , 1,2502,1, , 00000003BCFF2337,IsOffLatchSet,
40000000, 00000000, 0000000000000000, 00000000, 0,  On Point;

Off?,4,104, 0, ?OFF, ,1,2501,1, , ,IsOff,
50000000, 00000000, 0000000000000000, 00000000, 0,  Is;

On-Latch Set?,98,104, 0, +LATCH@I, , 1,2504,1, , 00000003BCFF2337,IsOnLatchSet,
40000000, 00000000, 0000000000000000, 00000000, 0,  On Point;

On?,2,104, 0, ?ON, ,1,2503,1, , ,IsOn,
50000000, 00000000, 0000000000000000, 00000000, 0,  Is;

OR?,12,107, 0, LOR, ,2,2507,2, DLOR D>I, ,
50000000, 00000000, 0000000000000000, 0000C01B, 9,  Is,
50000000, 00000000, 0000000000000000, 0000C01B, 9,    ;

PID Loop Communication Enabled?,99,109,  0,  ENABLE@, , 1,3004,1, ,  ,IsPidLoopCommEnabled,
00000000, 00000004, 0000000000000000, 00000000, 0,  PID Loop;

Pointer Equal to Null?,100,111, 0, Pointer=Null?, Pointer=Null?,1,3002,0, , ,
00000000, 00000000, 0000000000000000, 80000000, 0, Pointer;

Pointer Table Element Equal to Null?,101,111,0,TablePointer=Null?, TablePointer=Null?,2,3003,2, , ,
00000000, 00000000, 0000000000000000, 00000009, 3,  Index,
00000000, 00000000, 0000000000000000, 00001000, 2,  Of Table;

String Equal to String Table Element?,83,110, 0, $=, ,3,4541,3, , ,
00000000, 00000000, 0000000000000000, 00000044, 0,  Is,
00000000, 00000000, 0000000000000000, 00000009, 3,  At Index,
00000000, 00000000, 0000000000000000, 00000800, 2,  Of Table;

String Equal?,11,110, 0, $=, ,2,4540,2, , ,
00000000, 00000000, 0000000000000000, 00000044, 0,  Is,
00000000, 00000000, 0000000000000000, 00000044, 0,  To;

Timer Expired?,79,113, 0, T0=, ,1,5010,1, , ,HasTimerExpired,
00000000, 00000000, 0000000000000000, 00002020, 0,  Is;

Up Timer Target Time Reached?,107,113, 0, T0=, T0=,1,6001,1, , ,HasUpTimerReachedTargetTime,
00000000, 00000000, 0000000000000000, 00002000, 0,  Up Timer;

Variable False?,21,107, 0, 0=, ,1,7501,1, D0=, ,IsVariableFalse,
00000000, 00000000, 0000000000000000, 00004018, 2,  Is;

Variable True?,20,107, 0, 0<>, ,1,7502,1, 0.. D<>, ,IsVariableTrue,
00000000, 00000000, 0000000000000000, 00004018, 2,  Is;

Within Limits?,80,107, 0, 2 PICK >= -ROT >= AND, 2 PICK F>= -ROT F>= AND,3,16,3, 2ROT 2DUP 2ROT D<= I>D -2ROT D<= I>D DAND 0.. D<>, ,IsWithinLimits,
00000000, 00000003, 0000000000000000, 0000E03B, 1,  Is,
00000000, 00000000, 0000000000000000, 0000C01B, 1,  >=,
00000000, 00000000, 0000000000000000, 0000C01B, 1,  And <=;

XOR?,13,107, 0, LXOR, ,2,9002,2, DLXOR D>I, ,
50000000, 00000000, 0000000000000000, 0000C01B, 9,  Is,
50000000, 00000000, 0000000000000000, 0000C01B, 9,  ;

QA ASSERT?,118,108, 01, ,  ,1,0,1, , ,QA_ASSERT, 00000001,
50000000, 00000003, 0000000000000000, 0000E03B, 3,  Test;

QA ASSERT EQ?,119,108, 01, DUP *_HSV_QA1 I>$ 1 PICK *_HSV_QA2 I>$ =, DUP *_HSV_QA1 F>$ 1 PICK *_HSV_QA2 F>$ F=,2,0,2, 2DUP *_HSV_QA1 D>$ 2SWAP 2DUP *_HSV_QA2 D>$ D=, ,QA_ASSERT_EQ,  00000001,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  Compare,
50000000, 00000003, 0000000000000000, 0000E03B, 1,  With;

QA ASSERT APPROXIMATELY EQ?,120,108, 01, 2 PICK *_HSV_QA1 F>$ 100.0 1 PICK F- 100.0 F/ 2 PICK F* -ROT 100.0 F+ 100.0 F/ F* DUP 0.0 F< IF SWAP THEN 2 PICK F>= -ROT F>= AND, 2 PICK *_HSV_QA1 F>$ 100.0 1 PICK F- 100.0 F/ 2 PICK F* -ROT 100.0 F+ 100.0 F/ F* DUP 0.0 F< IF SWAP THEN 2 PICK F>= -ROT F>= AND,3,0,3, , ,QA_ASSERT_AEQ, 00000001,
50000000, 00000003, 0000000000000000, 0000E03B, 7,  Compare,
50000000, 00000003, 0000000000000000, 0000E03B, 7,  With,
00000000, 00000000, 0000000000000000, 0000E03B, 7,  Tolerance;

Event Occurred?,54,105, 10000008, E/RContByte@ 0 BitTest, ,1,391,1, , ,HasEventOccurred,
00000000, 00000018, 0000000000000000, 00000000, 0,  Has;

Event Occurring?,55,105, 10000008, E/RContByte@ 1 BitTest, ,1,392,1, , ,IsEventOccurring,
00000000, 00000018, 0000000000000000, 00000000, 0,  Is;

Event Scanning Disabled?,52,105, 10000008, E/RContByte@ 7 BitTestNot, ,1,393,1, , ,IsEventScanningDisabled,
00000000, 00000018, 0000000000000000, 00000000, 0,  Event/Reaction;

Event Scanning Enabled?,53,105, 10000008, E/RContByte@ 7 BitTest, ,1,394,1, , ,IsEventScanningEnabled,
00000000, 00000018, 0000000000000000, 00000000, 0,  Event/Reaction;

Event/Reaction Communication Enabled?,92,109,  10000008,  ENABLE@, , 1,425,1, , ,IsEventReactionCommEnabled,
00000000, 00000018, 0000000000000000, 00000000, 0,  Event/Reaction;

Event/Reaction Group Communication Enabled?,93,109,  10000008,  ENABLE@, , 1,426,1, , ,IsEventReactionGroupEnabled,
00000000, 00000080, 0000000000000000, 00000000, 0,  E/R Group;

Mistic PID Loop Communication Enabled?,114,109,  10000008,  ENABLE@, , 1,429,1, ,  ,IsMisticPidLoopCommEnabled,
00000000, 00000200, 0000000000000000, 00000000, 0,  PID Loop;

Generating Interrupt?,61,105, 10000008, IntBoard?, ,1,395,1, , ,IsGeneratingInterrupt,
00000000, 00000000, 000000000003700A, 00000000, 0,  Is;

Interrupt Disabled for Event?,56,105, 10000008, E/RContByte@ 6 BitTestNot, ,1,396,1, , ,IsInterruptDisabledForEvent,
00000000, 00000078, 0000000000000000, 00000000, 0,  Event/Reaction;

Interrupt Enabled for Event?,57,105, 10000008, E/RContByte@ 6 BitTest, ,1,397,1, , ,IsInterruptEnabledForEvent,
00000000, 00000078, 0000000000000000, 00000000, 0,  Event/Reaction;
