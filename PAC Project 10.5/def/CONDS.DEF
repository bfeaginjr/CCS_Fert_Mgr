/*    INSTRUCTION FIELD FORMAT

  Each instruction has the following format:
    
      INSTRUCTION INFO: name, id, group, int32, float, num args, help, op pos, int64, I/O unit filter
      ARGUMENT 1:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt,
      ARGUMENT 2:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt,
      ...
      ARGUMENT 8:       Bitmask0, Bitmask1, Bitmask2, Bitmask3, fetch type, prompt;    */
/*
  INSTRUCTION INFO DETAILS

    instruction name,   (string)
    instruction number, (highest used so far: 113)
    group for sorting,  (also see CGROUPS.DEF)
      Chart                    ,100
      Communication - Network  ,101
      Communication - Serial   ,102
      Controller               ,103
      Digital Point            ,104
      Event/Reaction           ,105
      I/O Unit                 ,106 
      Logical                  ,107
      Miscellaneous            ,108
      Simulation               ,109
      String                   ,110
      Pointers                 ,111
      Subroutines             , 99)  ;*/
/*  forth word int32,    (string)
    forth word float,    (string)
    number of arguments, (char) 0 - 8
    help id,             generated by RoboHelp for online help (internal use only) 
                         should be left as zero for anyone else,
    operator position,   (a number less than or equal to the number of arguments)
    forth word int64,    (string) (for backward compatibility with pre-3.1 
                                   OptoControl strategies, this field is optional)
    I/O Unit filter,     (Bitmask) (for backward compatibility with pre-3.1 
                                    OptoControl strategies, this field is optional)
    OptoScript name,     (string)  (for backward compatibility with pre-4.0 
                                    OptoControl strategies, this field is optional)
;*/
/*
  BITMASK 0 - Digital defines:

      DIN_DUMB                         0x80000000
      DIN_SMART                        0x40000000
      DIN_COUNTER                      0x00000001
      DIN_COUNTER_QUADRATURE           0x00000002
      DIN_ON_PULSE_MEAS                0x00000010
      DIN_OFF_PULSE_MEAS               0x00000020
      DIN_FREQUENCY                    0x00000040
      DIN_PERIOD                       0x00000080
      DIN_ON_TIME_TOTALIZER            0x00000100
      DIN_OFF_TIME_TOTALIZER           0x00000200
      DOUT_DUMB                        0x20000000
      DOUT_SMART                       0x10000000
      DOUT_TPO                         0x00010000 
;*/
/*
  BITMASK 1 - Analog/Misc. defines:

      AIN                              0x00000001
      AOUT                             0x00000002
      PID_LOOP                         0x00000004
      DIGITAL_EVENT_REACTION           0x00000008
      ANALOG_EVENT_REACTION            0x00000010
      EVENT_REACTION_GROUP             0x00000080
      CHART                            0x00000100
;*/
/*
  BITMASK 2 - I/O Unit defines:

      BOARD_DUMB_DIGITAL               0x00000001
      BOARD_SMART_DIGITAL              0x00000002
      BOARD_REMOTE_SIMPLE_DIGITAL      0x00000004
      BOARD_SMART_ANALOG               0x00000008
      BOARD_HRD_THERMOCOUPLE_MV        0x00000010
      BOARD_HRD_VOLTAGE_CURRENT_INPUT  0x00000020
      BOARD_HRD_VOLTAGE_OUTPUT         0x00000040
      BOARD_HRD_CURRENT_OUTPUT         0x00000080
      BOARD_HRD_RTD                    0x00000100
      BOARD_SMART_ANALOG_B200          0x00001000
      BOARD_SMART_DIGITAL_SNAP         0x00002000
      BOARD_SMART_ANALOG_SNAP          0x00004000 
      BOARD_SMART_DIGITAL_B100         0x00010000
      BOARD_REMOTE_SIMPLE_DIGITAL_SNAP 0x00020000 
      BOARD_DIGITAL_SNAP_64            0x00040000
      BOARD_MIXED_SNAP_64              0x00080000
      BOARD_MIXED_SNAP_SIO_AD64        0x00800000
;*/
/*
  BITMASK 3 - Constant & Variable defines:

      LITERAL_INTEGER                  0x00000001
      LITERAL_FLOAT                    0x00000002
      LITERAL_STRING                   0x00000004
      VARIABLE_INTEGER                 0x00000008
      VARIABLE_FLOAT                   0x00000010
      VARIABLE_TIMER                   0x00000020
      VARIABLE_STRING                  0x00000040
      VARIABLE_POINTER                 0x80000000
      TABLE_INTEGER                    0x00000100
      TABLE_FLOAT                      0x00000200
      TABLE_STRING                     0x00000800
      TABLE_POINTER                    0x00001000
      VARIABLE_UP_TIMER                0x00002000 
      VARIABLE_INTEGER_64              0x00004000
      LITERAL_INTEGER_64               0x00008000
      TABLE_INTEGER_64                 0x00010000
;*/
/*
  FETCH TYPES:

    0  = No fetch
    1  = Fetch and promote         
    2  = Fetch as is
    3  = Fetch and demote to int32
    4  = Store after promoting
    5  = Store int32 or int64 to destination
    6  = Store float to destination
    7  = Fetch and always promote
    8  = Fetch and promote or demote to largest integer 
    9  = Fetch as is, promote to int64 if needed (digital points and numbers only)
    10 = Store Int32 to destination
    11 = Store Int64 to destination

    Promote: to increase the storage capacity of a number, if necessary. 
             An int32 can be promoted to an int64 or a float.
             An int64 can be promoted to a float.
    Demote:  to decrease the storage capacity of a number, if necessary. 
             An float can be demoted to an int64 or an int32.
             An int64 can be demoted to an int32.
*/;


AND?,14,107, LAND, ,2,180,2, DLAND D>I, ,
F3000000, 00000000, 00000000, 0000C01B, 9,  Is,
F3000000, 00000000, 00000000, 0000C01B, 9,  ;

ARCNET Connected?,84,101, ARCNetActivity?, ARCNetActivity?,0,375,0, , ,IsArcnetConnected,;

ARCNET Message Address Equal to?,32,101, ARCDEST@ =, ,1,376,1, , ,IsArcnetMsgAddressEqual,
00000000, 00000000, 00000000, 00000009, 3,  Address;

ARCNET Node Present?,85,101, CheckARCNetNode, CheckARCNetNode,1,377,1, , ,IsArcnetNodePresent,
00000000, 00000000, 00000000, 00000009, 3,  Address;

Bit AND?,16,107, AND, ,2,399,2, DAND 0.. D<>, ,
00000000, 00000000, 00872007, 0000C01B, 8,  Is,
00000000, 00000000, 00872007, 0000C01B, 8,  ;

Bit NOT?,17,107, NOT, ,1,400,1, DNOT 0.. D<>, ,
00000000, 00000000, 00872007, 0000C01B, 8,  Is;

Bit Off?,63,107, BitTestNot, ,2,401,2, I>D 1.. 2SWAP D>I 2SHIFT DAND D0=, ,IsBitOff,
00000000, 00000000, 00872007, 00004008, 8,  In,
00000000, 00000000, 00000000, 00000009, 2,  Bit;

Bit On?,62,107, BitTest, ,2,402,2, I>D 1.. 2SWAP D>I 2SHIFT DAND 0.. D<>, ,IsBitOn,
00000000, 00000000, 00872007, 00004008, 8,  In,
00000000, 00000000, 00000000, 00000009, 2,  Bit;

Bit OR?,18,107, OR, ,2,403,2, DOR 0.. D<>, ,
00000000, 00000000, 00872007, 0000C01B, 8,  Is,
00000000, 00000000, 00872007, 0000C01B, 8,    ;

Bit XOR?,19,107, XOR, ,2,404,2, DXOR 0.. D<>, ,
00000000, 00000000, 00872007, 0000C01B, 8,  Is,
00000000, 00000000, 00872007, 0000C01B, 8,    ;

Calling Chart Running?,76,100, Caller @ ?RUNNING, ,0,368,0, , ,IsCallingChartRunning,;

Calling Chart Stopped?,77,100, Caller @ ?STOPPED, ,0,369,0, , ,IsCallingChartStopped,;

Calling Chart Suspended?,78,100, Caller @ ?SUSPED, ,0,370,0, , ,IsCallingChartSuspended,;

Caused a Chart Error?,29,103,ERRORTASK@ =, ,1,437,1, , ,HasChartCausedError,
00000000, 00000100, 00000000, 00000000, 0,  Has;

Caused an I/O Unit Error?,30,103,ERRORBOARD@ =, ,1,383,1, , ,HasIoUnitCausedError,
00000000, 00000000, 008F71FF, 00000000, 0,  Has;

Characters Waiting at Serial Port?,31,102, ?PORTKEY 0<>, ,1,379,1, , ,AreCharsWaitingAtSerialPort,
00000000, 00000000, 00000000, 00000009, 3,  Port;

Chart Running?,22,100, ?RUNNING, ,1,371,1, , ,IsChartRunning,
00000000, 00000100, 00000000, 00000000, 0,  Is;

Chart Stopped?,25,100, ?STOPPED, ,1,372,1, , ,IsChartStopped,
00000000, 00000100, 00000000, 00000000, 0,  Is;

Chart Suspended?,23,100, ?SUSPED, ,1,373,1, , ,IsChartSuspended,
00000000, 00000100, 00000000, 00000000, 0,  Is;

Comment (Block),27,108, \\, ,0,422,0, , ;

Comment (Single Line),26,108, \, ,1,423,0, , ,
00000000, 00000000, 00000000, 00000004, 0,  ;

Communication To All I/O Points Enabled?,111,109, PTS.ENABLED?, ,0,507,0, , ,IsCommToAllIoPointsEnabled,;

Communication To All I/O Units Enabled?,112,109, IO.ENABLED?, ,0,506,0, , ,IsCommToAllIoUnitsEnabled,;

CTS Off?,89,102, GetCTSState, , 1,380,1, , ,IsCtsOff,
00000000, 00000000, 00000000, 00000009, 3,  On Port;

CTS On?,90,102, GetCTSState 0=, , 1,381,1, , ,IsCtsOn,
00000000, 00000000, 00000000, 00000009, 3,  On Port;

Down Timer Expired?,108,108, T0=, T0=,1,479,1, , ,HasDownTimerExpired,
00000000, 00000000, 00000000, 00000020, 0,  Down Timer;

Equal to Table Element?,65,107, =, F=,3,405,3, D=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Equal?,5,107, =, F=,2,406,2, D=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  To   ;

Error on I/O Unit?,33,103, ERRORBOARD@ ?(null) 0=, ,0,384,0, , ,IsErrorOnIoUnit,;

Error?,28,103, ERRORCOUNT@ 0<>, ,0,385,0, , ,IsErrorPresent,;

Float Valid?,113,108, $7F800000 AND $7F800000 <>, ,1,3001,1, , ,IsFloatValid,
00000000, 00000000, 00000000, 00000010, 2,  Is;

Ethernet Session Open?,91,101, SessionExists? 0=, , 1,378,1, , ,IsEnetSessionOpen,
00000000, 00000000, 00000000, 00000009, 3,  Session;

Event Occurred?,54,105, E/RContByte@ 0 BitTest, ,1,391,1, , ,HasEventOccurred,
00000000, 00000078, 00000000, 00000000, 0,  Has;

Event Occurring?,55,105, E/RContByte@ 1 BitTest, ,1,392,1, , ,IsEventOccurring,
00000000, 00000078, 00000000, 00000000, 0,  Is;

Event Scanning Disabled?,52,105, E/RContByte@ 7 BitTestNot, ,1,393,1, , ,IsEventScanningDisabled,
00000000, 00000078, 00000000, 00000000, 0,  Event/Reaction;

Event Scanning Enabled?,53,105, E/RContByte@ 7 BitTest, ,1,394,1, , ,IsEventScanningEnabled,
00000000, 00000078, 00000000, 00000000, 0,  Event/Reaction;

Event/Reaction Communication Enabled?,92,109,  ENABLE@, , 1,425,1, , ,IsEventReactionCommEnabled,
00000000, 00000078, 00000000, 00000000, 0,  Event/Reaction;

Event/Reaction Group Communication Enabled?,93,109,  ENABLE@, , 1,426,1, , ,IsEventReactionGroupEnabled,
00000000, 00000080, 00000000, 00000000, 0,  E/R Group;

Generating Interrupt?,61,105, IntBoard?, ,1,395,1, , ,IsGeneratingInterrupt,
00000000, 00000000, 000371FA, 00000000, 0,  Is;

Greater Than or Equal to Table Element?,75,107, >=, F>=,3,407,3, D>=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Greater Than or Equal?,7,107, >=, F>=,2,408,2, D>=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  To;

Greater Than Table Element?,73,107, >, F>,3,409,3, D>, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Greater?,9,107, >, F>,2,410,2, D>, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Than;

Host Task Received a Message?,86,100, CommandReceived?, CommandReceived?,1,374,1, , ,HasHostTaskRecievedMessage,
00000000, 00000000, 00000000, 00000009, 3,  On Port;

I/O Point Communication Enabled?,94,109,  ENABLE@, , 1,427,1, , ,IsIoPointCommEnabled,
F0000000, 00000003, 00000000, 00000000, 0,  I/O Point;

I/O Unit Communication Enabled?,95,109,  ENABLE@, , 1,428,1, , ,IsIoUnitCommEnabled,
00000000, 00000000, 008F71FF, 00000000, 0,  I/O Unit;

I/O Unit Ready?,96,106, BoardReady? 0=, , 1,398,1, , ,IsIoUnitReady,
00000000, 00000000, 008F71FF, 00000000, 0,  Is;

Interrupt Disabled for Event?,56,105, E/RContByte@ 6 BitTestNot, ,1,396,1, , ,IsInterruptDisabledForEvent,
00000000, 00000078, 00000000, 00000000, 0,  Event/Reaction;

Interrupt Enabled for Event?,57,105, E/RContByte@ 6 BitTest, ,1,397,1, , ,IsInterruptEnabledForEvent,
00000000, 00000078, 00000000, 00000000, 0,  Event/Reaction;

Interrupt On Port0?,102,102, 0 BitTest GetActiveInts, ,0,466,0, , ,IsInterruptOnPort0,;

Interrupt On Port1?,103,102, 1 BitTest GetActiveInts, ,0,467,0, , ,IsInterruptOnPort1,;

Interrupt On Port2?,104,102, 2 BitTest GetActiveInts, ,0,468,0, , ,IsInterruptOnPort2,;

Interrupt On Port3?,105,102, 3 BitTest GetActiveInts, ,0,469,0, , ,IsInterruptOnPort3,;

Interrupt On Port6?,106,102, 6 BitTest GetActiveInts, ,0,470,0, , ,IsInterruptOnPort6,;

Less Than or Equal to Table Element?,71,107, <=, F<=,3,411,3, D<=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Less Than or Equal?,8,107, <=, F<=,2,412,2, D<=, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  To;

Less Than Table Element?,69,107, <, F<,3,413,3, D<, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Less?,10,107, <, F<,2,414,2, D<, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Than;

Low RAM Backup Battery?,87,103, LowBattery?, ,0,386,0, , ,IsRamBackupBatteryLow,;

Not Equal to Table Element?,67,107, <>, F<>,3,417,3, D<>, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 00000009, 3,  At Index,
00000000, 00000000, 00000000, 00010300, 1,  Of Table;

Not Equal?,6,107, <>, F<>,2,416,2, D<>, ,
F30003F3, 00000003, 00000000, 0000E03B, 1,  Is,
F30003F3, 00000003, 00000000, 0000E03B, 1,  To;

NOT?,15,107, LNOT, ,1,415,1, D0=, ,
F3000000, 00000000, 00000000, 0000C01B, 2,  Is;

Off-Latch Set?,97,104, -LATCH@I, , 1,388,1, , 008F2006,IsOffLatchSet,
40000000, 00000000, 00000000, 00000000, 0,  On Point;

Off?,4,104, ?OFF, ,1,387,1, , 008F2007,IsOff,
F3000000, 00000000, 00000000, 00000000, 0,  Is;

On-Latch Set?,98,104, +LATCH@I, , 1,390,1, , 008F2006,IsOnLatchSet,
40000000, 00000000, 00000000, 00000000, 0,  On Point;

On?,2,104, ?ON, ,1,389,1, , 008F2007,IsOn,
F3000000, 00000000, 00000000, 00000000, 0,  Is;

OR?,12,107, LOR, ,2,418,2, DLOR D>I, ,
F3000000, 00000000, 00000000, 0000C01B, 9,  Is,
F3000000, 00000000, 00000000, 0000C01B, 9,    ;

PID Loop Communication Enabled?,99,109,  ENABLE@, , 1,429,1, ,  ,IsPidLoopCommEnabled,
00000000, 00000004, 00000000, 00000000, 0,  PID Loop;

Pointer Equal to Null?,100,111, Pointer=Null?, Pointer=Null?,1,471,0, , , ,
00000000, 00000000, 00000000, 80000000, 0, Pointer;

Pointer Table Element Equal to Null?,101,111,TablePointer=Null?, TablePointer=Null?,2,472,2, , , ,
00000000, 00000000, 00000000, 00000009, 3,  Index,
00000000, 00000000, 00000000, 00001000, 2,  Of Table;

String Equal to String Table Element?,83,110, $=, ,3,430,3, , ,
00000000, 00000000, 00000000, 00000044, 0,  Is,
00000000, 00000000, 00000000, 00000009, 2,  At Index,
00000000, 00000000, 00000000, 00000800, 2,  Of Table;

String Equal?,11,110, $=, ,2,431,2, , ,
00000000, 00000000, 00000000, 00000044, 0,  Is,
00000000, 00000000, 00000000, 00000044, 0,  To;

Timer Expired?,79,108, T0=, ,1,424,1, , ,HasTimerExpired,
00000000, 00000000, 00000000, 00002020, 0,  Is;

Up Timer Target Time Reached?,107,108, T0=, T0=,1,478,1, , ,HasUpTimerReachedTargetTime,
00000000, 00000000, 00000000, 00002000, 0,  Up Timer;

Variable False?,21,107, 0=, ,1,419,1, D0=, ,IsVariableFalse,
00000000, 00000000, 00000000, 00004018, 2,  Is;

Variable True?,20,107, 0<>, ,1,420,1, 0.. D<>, ,IsVariableTrue,
00000000, 00000000, 00000000, 00004018, 2,  Is;

Within Limits?,80,107, 2 PICK >= -ROT >= AND, 2 PICK F>= -ROT F>= AND,3,438,3, 2ROT 2DUP 2ROT D<= I>D -2ROT D<= I>D DAND 0.. D<>, ,IsWithinLimits,
000103F1, 00000003, 00000000, 0000E03B, 1,  Is,
00000000, 00000000, 00000000, 0000C01B, 1,  >=,
00000000, 00000000, 00000000, 0000C01B, 1,  And <=;

XOR?,13,107, LXOR, ,2,421,2, DLXOR D>I, ,
F3000000, 00000000, 00000000, 0000C01B, 9,  Is,
F3000000, 00000000, 00000000, 0000C01B, 9,  ;
